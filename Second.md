#游戏设计中经典的计算公式（连载）
##第二节——你的英雄能打出全额伤害吗？
上节我向大家介绍了Ehp方面的内容，这节我们来谈一下Edps.首先什么是Edps呢？Edps就是effective damage per second,即有效输出。前面我已经说到面板上的输出数值不能完全体现在敌人生命值上，那到底能有多少的输出呢？这就是有效输出的定义了，它就指你的角色对敌人造成的实际伤害量。为了让大家理解Edps,我来给大家介绍一些常用的伤害公式,大家以后在制作此类游戏时也可以拿来作为参考:

![](http://ww1.sinaimg.cn/mw600/8efd1f6fgw1dzgobgnkf1j.jpg)



***

###1.DMG=a * ATK-b * targetDEF类（俗称加法公式，或减法公式）

####适用情况
老话常说，最简单的反而是最好用的。此公式特点，形式最为简单，结果最为直接，但是需要设计者在整个游戏数值架构内花更多的心思去搭建。这类公式最适合所有ATK与DEF的成长空间有限，并且ATK与DEF成长比例一定的情况下，上节举到的英雄联盟就是个很好的例子，因为它的各项数值都是按一定比例成长的，而且每个英雄的最高等级都是固定且相同的。当然不排除特殊处理过的情况，可能会带来意想不到的效果。在这儿再把前面的萌龟请上场给大家展示追打萌妹子的暴力场面。（只顾截屏，竟然被反杀，好尴尬......）![](http://b174.photo.store.qq.com/psb?/V1000cAq0rKbWf/HtXrwGIurHFRS7U0dkcYnvAJeWvrY..Rd0yBn*gO3WM!/b/dCz1t2cvIAAA&bo=zAIYAgAAAAABAPM!&rf=viewer_4)

####问题处理

这类公式通常会遇到一个问题，就是当b * targetDEF > a * ATK时，所得伤害是负数，如果直接扣血会发现越扣血越多。此时我们需要在战斗逻辑中补一个漏洞。如果（a*ATK – b*targetDEF）≤0，则DMG=1。即当你的伤害是负数时，固定你的伤害为1。

####公式变式

使用这种公式可能还会遇到一个问题。战斗双方如果实力差距较大时，会发生极端压制情况，比如两方相遇，一方可能瞬间击杀对手，即所谓的秒杀。这样，我们可以适当的构造一个减函数F(X)，最终修正公式为DMG=(a * ATK – b * targetDEF)*F(Diff(ATK,targetDEF))          （其中Diff为形容ATK与DEF差的函数）

###2.DMG=a * ATK * F(targetDEF)类（俗称乘法公式，或者除法公式）

####适用情况
如果把上一种公式形象描述为“抵消伤害”的话，那么这种公式可以形容为“折损伤害”。这种公式比较适合ATK与DEF的成长空间无限大（就是那种街头泛滥的网游，无限砸装备，无限成长的那种），此公式就是为那类想在游戏中追求无限快感的玩家设计的。

####问题处理
这类公式需要注意F(X)的处理。通常F(x)都会构造出一个带有下界且下界大于0的函数，或者构造一个关于ATK与DEF的函数F（ATK，DEF）并且也需同样造成下图的效果。

![](http://b175.photo.store.qq.com/psb?/V1000cAq0rKbWf/4hsuQBDoISa9*oGxbb29OWyS7P193aNI1TvudnI4BfQ!/b/dNcSVWjfGgAA&bo=LAI1ASwCNQEBACc!&rf=viewer_4)

###3.DMG=F(ATK,targetDEF)  (其他类）
由于其他类的公式种类繁多，所以在此只提到一个比较常见的：DMG=ATK^2/(ATK + targetDEF)

![](http://s10.sinaimg.cn/mw690/9f56a65ftx6BeFtKaYF19&690)

如图所示，红线代表伤害关于攻击力的函数曲线，橙黄色代表伤害关于防御力的函数曲线。从这两个函数分析得出，当攻击方攻击力大于防御方防御力时，曲线接近直线既每点攻击力带来的伤害增益为1点。当防御方小于攻击方攻击力时，曲线接近直线既从普遍情况来看，每点防御力带来的伤害减少为0.5点。所以使用这种伤害公式，我们再设计角色属性以及属性的成长的时候，尽量控制ATK大于DEF的情况，这样结果看起来比较好看。

###总结
本节为大家讲述了Edps的概念和设计方法，希望大家能够有所收获。当然这些都是最基本的知识，如果想要达到特殊的目标或者更好的体验还需要在逻辑层面上下功夫。公式结合逻辑，可能会造就出无限多的优良战斗系统，希望你们能在以后的游戏设计中有很大的进步。


（泰然网原创，允许转载，转载须注明来源，蛮三刀镇贴）![](http://b174.photo.store.qq.com/psb?/V1000cAq0rKbWf/mzr.tzYNlwkeiEwLvGgGjNsbs.9ov44ycwbgEMrUSO4!/b/dPvjt2eaHAAA&bo=RwJXAUcCVwEBACc!&rf=viewer_4)



